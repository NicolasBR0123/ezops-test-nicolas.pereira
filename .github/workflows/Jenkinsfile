


pipeline {
     agent any

    
    stages {

        stage ('Build docker image') {
           steps {
               script {
                   dockerapp = docker.build("web-chat-ezops:nodealpine18.10.0", '-f ./app/Dockerfile ./app')
		                stage('Image Successfully') {
		                    echo'Image OK'
		                }
	            }
            }
        }
	    
	    
        stage ('Push image to hub') {
           steps {
                script {
                    withCredentials([string(credentialsId: '448986393877782883328382439534', variable: 'dockerhubpwd')]) {
                    sh'docker login -u 448986393877782883328382439534 -p ${f8@K95KNuVxc}'
                    }
                    sh'docker push 448986393877782883328382439534/web-chat-ezops'
	            }   
            }
        }


	    stage ('Run container') {
		   steps {
		      script {
		        sh'docker run -d -p 8000:8000 web-chat-ezops:nodealpine18.10'
			        stage('Conatiner Successfully') {
			            echo'Container OK'
			        }
		        }    
	        }    
	    }
    }
}
