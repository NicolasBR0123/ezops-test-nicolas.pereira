
pipeline {
     agent any
     environment {
     DOCKERHUB_CREDENTIALS = credentials('docker-hub-nicolas')
     }

    stages {
    	    
     	stage('Build docker image') {
       	    steps{
      	        sh 'docker build -t web-chat/nodeapp:$BUILD_NUMBER ./app'
     	    }
     	}
          
        stage('Push image') {
	    steps{
	        sh 'docker push web-chat/nodeapp:$BUILD_NUMBER'
	    }	
	 }      
    } 	     	
}
